<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>School Election Voting Booth</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f0f4f8;
      padding: 20px;
      text-align: center;
    }
    h1 {
      color: #1c3d5a;
    }
    .category {
      margin-top: 40px;
    }
    .candidate-grid {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 20px;
    }
    .candidate {
      background: white;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.15);
      width: 180px;
      padding: 10px;
      transition: transform 0.2s;
    }
    .candidate:hover {
      transform: scale(1.03);
    }
    .candidate img {
      width: 100%;
      height: 180px;
      object-fit: cover;
      border-radius: 8px;
    }
    .candidate h3 {
      margin: 10px 0;
      color: #333;
    }
    .vote-btn {
      background-color: #1a73e8;
      color: white;
      border: none;
      padding: 10px;
      width: 100%;
      border-radius: 5px;
      font-weight: bold;
      cursor: pointer;
    }
    .vote-btn:disabled {
      background-color: #aaa;
      cursor: not-allowed;
    }
    #message {
      margin-top: 30px;
      font-size: 18px;
      font-weight: bold;
      color: green;
    }
  </style>
</head>
<body>

<h1>üó≥Ô∏è School Election Voting Booth</h1>
<p>Enter your Registration Number and cast your vote below!</p>

<!-- SPL ‚Äì Boys Section -->
<div class="category">
  <h2>SPL ‚Äì Boys</h2>
  <div class="candidate-grid">
    <div class="candidate">
      <img src="rahul.jpg" alt="Rahul">
      <h3>Rahul</h3>
      <button class="vote-btn" data-category="SPL-Boys" onclick="castVote('SPL-Boys', 'Rahul')">Vote</button>
    </div>
    <div class="candidate">
      <img src="arjun.jpg" alt="Arjun">
      <h3>Arjun</h3>
      <button class="vote-btn" data-category="SPL-Boys" onclick="castVote('SPL-Boys', 'Arjun')">Vote</button>
    </div>
    <div class="candidate">
      <img src="vikram.jpg" alt="Vikram">
      <h3>Vikram</h3>
      <button class="vote-btn" data-category="SPL-Boys" onclick="castVote('SPL-Boys', 'Vikram')">Vote</button>
    </div>
    <div class="candidate">
      <img src="dinesh.jpg" alt="Dinesh">
      <h3>Dinesh</h3>
      <button class="vote-btn" data-category="SPL-Boys" onclick="castVote('SPL-Boys', 'Dinesh')">Vote</button>
    </div>
  </div>
</div>

<!-- SPL ‚Äì Girls Section -->
<div class="category">
  <h2>SPL ‚Äì Girls</h2>
  <div class="candidate-grid">
    <div class="candidate">
      <img src="anjali.jpg" alt="Anjali">
      <h3>Anjali</h3>
      <button class="vote-btn" data-category="SPL-Girls" onclick="castVote('SPL-Girls', 'Anjali')">Vote</button>
    </div>
    <div class="candidate">
      <img src="meera.jpg" alt="Meera">
      <h3>Meera</h3>
      <button class="vote-btn" data-category="SPL-Girls" onclick="castVote('SPL-Girls', 'Meera')">Vote</button>
    </div>
    <div class="candidate">
      <img src="sneha.jpg" alt="Sneha">
      <h3>Sneha</h3>
      <button class="vote-btn" data-category="SPL-Girls" onclick="castVote('SPL-Girls', 'Sneha')">Vote</button>
    </div>
    <div class="candidate">
      <img src="deepa.jpg" alt="Deepa">
      <h3>Deepa</h3>
      <button class="vote-btn" data-category="SPL-Girls" onclick="castVote('SPL-Girls', 'Deepa')">Vote</button>
    </div>
  </div>
</div>

<!-- Status Message -->
<div id="message"></div>

<!-- Script -->
<script>
  const scriptURL = "https://script.google.com/macros/s/AKfycbylhbilnjhkuNXooBNUrlOYfUMV_bDAJORRzB1npF7xnjTSdk5cnTcFVlLZKhU4PeEn1Q/exec"; // Replace with your Apps Script Web App URL

  function castVote(category, candidate) {
    const studentID = prompt("Enter your Registration Number:");
    if (!studentID || studentID.trim() === "") {
      alert("You must enter your RegNo to vote.");
      return;
    }

    const url = `${scriptURL}?studentID=${encodeURIComponent(studentID)}&category=${encodeURIComponent(category)}&candidate=${encodeURIComponent(candidate)}`;

    fetch(url)
      .then(res => res.text())
      .then(response => {
        document.getElementById("message").textContent = response;

        // Disable only buttons in the voted category
        document.querySelectorAll(`.vote-btn[data-category='${category}']`).forEach(btn => {
          btn.disabled = true;
        });
      })
      .catch(error => {
        alert("Vote failed. Please try again.");
        console.error("Error!", error.message);
      });
  }
</script>

</body>
</html>
