<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>School Election Voting</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f2f6fc;
      padding: 20px;
      text-align: center;
    }
    h1 {
      color: #2b2b6d;
    }
    .category {
      margin-top: 40px;
    }
    .candidate-grid {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 20px;
    }
    .candidate {
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      width: 180px;
      padding: 10px;
    }
    .candidate img {
      width: 100%;
      height: 180px;
      object-fit: cover;
      border-radius: 10px;
    }
    .candidate h3 {
      margin: 10px 0;
      font-size: 18px;
      color: #333;
    }
    .vote-btn {
      background-color: #0066cc;
      color: white;
      border: none;
      padding: 10px;
      width: 100%;
      border-radius: 5px;
      cursor: pointer;
    }
    .vote-btn:disabled {
      background-color: #aaa;
      cursor: not-allowed;
    }
    #message {
      margin-top: 30px;
      font-size: 20px;
      font-weight: bold;
      color: green;
    }
  </style>
</head>
<body>

<h1>üó≥Ô∏è School Election Voting Booth</h1>
<p>Enter your Registration Number and click your favorite leader below.</p>

<div class="category">
  <h2>SPL ‚Äì Boys</h2>
  <div class="candidate-grid">
    <div class="candidate">
      <img src="rahul.jpg" alt="Rahul">
      <h3>Rahul</h3>
      <button class="vote-btn" onclick="castVote('SPL-Boys', 'Rahul')">Vote</button>
    </div>
    <div class="candidate">
      <img src="arjun.jpg" alt="Arjun">
      <h3>Arjun</h3>
      <button class="vote-btn" onclick="castVote('SPL-Boys', 'Arjun')">Vote</button>
    </div>
    <div class="candidate">
      <img src="vikram.jpg" alt="Vikram">
      <h3>Vikram</h3>
      <button class="vote-btn" onclick="castVote('SPL-Boys', 'Vikram')">Vote</button>
    </div>
    <div class="candidate">
      <img src="dinesh.jpg" alt="Dinesh">
      <h3>Dinesh</h3>
      <button class="vote-btn" onclick="castVote('SPL-Boys', 'Dinesh')">Vote</button>
    </div>
  </div>
</div>

<div class="category">
  <h2>SPL ‚Äì Girls</h2>
  <div class="candidate-grid">
    <div class="candidate">
      <img src="anjali.jpg" alt="Anjali">
      <h3>Anjali</h3>
      <button class="vote-btn" onclick="castVote('SPL-Girls', 'Anjali')">Vote</button>
    </div>
    <div class="candidate">
      <img src="meera.jpg" alt="Meera">
      <h3>Meera</h3>
      <button class="vote-btn" onclick="castVote('SPL-Girls', 'Meera')">Vote</button>
    </div>
    <div class="candidate">
      <img src="sneha.jpg" alt="Sneha">
      <h3>Sneha</h3>
      <button class="vote-btn" onclick="castVote('SPL-Girls', 'Sneha')">Vote</button>
    </div>
    <div class="candidate">
      <img src="deepa.jpg" alt="Deepa">
      <h3>Deepa</h3>
      <button class="vote-btn" onclick="castVote('SPL-Girls', 'Deepa')">Vote</button>
    </div>
  </div>
</div>

<div id="message"></div>

<script>
  const scriptURL = "https://script.google.com/macros/s/AKfycbyg3fgHlaLC0A1ws_S8BqEHQR2sMbmE--Onp3ehJ2JDGukVUmmIDnZCaPllZmILEJnVaA/exec";

  function castVote(category, candidate) {
    const studentID = prompt("Enter your Registration Number:");
    if (!studentID || studentID.trim() === "") {
      alert("You must enter your RegNo to vote.");
      return;
    }

    fetch(scriptURL, {
      method: "POST",
      body: JSON.stringify({ studentID, category, candidate }),
      headers: {
        "Content-Type": "application/json"
      }
    })
    .then(res => res.text())
    .then(response => {
      document.getElementById("message").textContent = response;
      document.querySelectorAll(".vote-btn").forEach(btn => btn.disabled = true);
    })
    .catch(error => {
      alert("Vote failed. Please try again.");
      console.error("Error!", error.message);
    });
  }
</script>

</body>
</html>
